import{c as Ze,a as V,e as ge,t as N}from"./disclose-version.CabQYDN2.js";import{k as fe,q as qe,ag as ut,n as dt,e as vt,D as je,ae as $e,H as ft,o as ze,u as He,v as be,h as et,i as tt,j as ct,aA as Me,L as Ge,aB as We,aC as Le,aD as _t,a3 as mt,I as Ye,aE as Re,aF as ht,ad as gt,aG as yt,az as bt,a6 as xt,aa as pt,ap as Ct,aH as rt,aI as Et,a8 as wt,au as at,p as Ae,aJ as me,aK as Ce,d as K,g as r,l as X,an as J,b as Be,f as Ie,c as q,s as Z,r as S,t as P,a as De,m as re,C as he,aL as It,$ as Ee,aM as kt}from"./runtime.Dp2_NtuM.js";import{s as oe}from"./render.Xj1apikL.js";import{i as z}from"./if.DGV_4xQS.js";import{l as At,g as we,a as _e,s as Q,b as Bt,c as Dt,d as St,e as Tt,t as Vt}from"./TextRead.DaQpUE8x.js";import{s as Je,i as Se,a as j,c as Fe,d as qt}from"./store.COzNvmsb.js";import{i as Ht,p as s}from"./props.BDa4Femt.js";import{a as nt,o as Mt,c as Ke}from"./index-client.CuZZhJzb.js";import{c as Nt,s as Ot,i as Ft,d as Lt,t as Ne}from"./firestore-join.esm.jpMNuUIG.js";import{w as Pe}from"./index.CJi4GJvv.js";import{s as Ue}from"./attributes.Dt26nM0A.js";let Oe=null;function Rt(a,e){return e}function Jt(a,e,t,n){for(var l=[],i=e.length,_=0;_<i;_++)ht(e[_].e,l,!0);var u=i>0&&l.length===0&&t!==null;if(u){var h=t.parentNode;gt(h),h.append(t),n.clear(),ie(a,e[0].prev,e[i-1].next)}yt(l,()=>{for(var b=0;b<i;b++){var y=e[b];u||(n.delete(y.k),ie(a,y.prev,y.next)),bt(y.e,!u)}})}function st(a,e,t,n,l,i=null){var _=a,u={flags:e,items:new Map,first:null},h=(e&rt)!==0;if(h){var b=a;_=fe?qe(xt(b)):b.appendChild(ut())}fe&&dt();var y=null,d=!1;vt(()=>{var x=t(),v=je(x)?x:x==null?[]:$e(x),c=v.length;if(d&&c===0)return;d=c===0;let p=!1;if(fe){var T=_.data===ft;T!==(c===0)&&(_=ze(),qe(_),He(!1),p=!0)}if(fe){for(var B=null,g,o=0;o<c;o++){if(be.nodeType===8&&be.data===pt){_=be,p=!0,He(!1);break}var f=v[o],H=n(f,o);g=lt(be,u,B,null,f,H,o,l,e),u.items.set(H,g),B=g}c>0&&qe(ze())}fe||zt(v,u,_,l,e,n),i!==null&&(c===0?y?et(y):y=tt(()=>i(_)):y!==null&&ct(y,()=>{y=null})),p&&He(!0),t()}),fe&&(_=be)}function zt(a,e,t,n,l,i){var O,de,M,R;var _=(l&Et)!==0,u=(l&(Le|Re))!==0,h=a.length,b=e.items,y=e.first,d=y,x,v=null,c,p=[],T=[],B,g,o,f;if(_)for(f=0;f<h;f+=1)B=a[f],g=i(B,f),o=b.get(g),o!==void 0&&((O=o.a)==null||O.measure(),(c??(c=new Set)).add(o));for(f=0;f<h;f+=1){if(B=a[f],g=i(B,f),o=b.get(g),o===void 0){var H=d?d.e.nodes_start:t;v=lt(H,e,v,v===null?e.first:v.next,B,g,f,n,l),b.set(g,v),p=[],T=[],d=v.next;continue}if(u&&Gt(o,B,f,l),o.e.f&Me&&(et(o.e),_&&((de=o.a)==null||de.unfix(),(c??(c=new Set)).delete(o))),o!==d){if(x!==void 0&&x.has(o)){if(p.length<T.length){var D=T[0],w;v=D.prev;var $=p[0],m=p[p.length-1];for(w=0;w<p.length;w+=1)Xe(p[w],D,t);for(w=0;w<T.length;w+=1)x.delete(T[w]);ie(e,$.prev,m.next),ie(e,v,$),ie(e,m,D),d=D,v=m,f-=1,p=[],T=[]}else x.delete(o),Xe(o,d,t),ie(e,o.prev,o.next),ie(e,o,v===null?e.first:v.next),ie(e,v,o),v=o;continue}for(p=[],T=[];d!==null&&d.k!==g;)d.e.f&Me||(x??(x=new Set)).add(d),T.push(d),d=d.next;if(d===null)continue;o=d}p.push(o),v=o,d=o.next}if(d!==null||x!==void 0){for(var G=x===void 0?[]:$e(x);d!==null;)d.e.f&Me||G.push(d),d=d.next;var ae=G.length;if(ae>0){var ue=l&rt&&h===0?t:null;if(_){for(f=0;f<ae;f+=1)(M=G[f].a)==null||M.measure();for(f=0;f<ae;f+=1)(R=G[f].a)==null||R.fix()}Jt(e,G,ue,b)}}_&&Ct(()=>{var ee;if(c!==void 0)for(o of c)(ee=o.a)==null||ee.apply()}),Ge.first=e.first&&e.first.e,Ge.last=v&&v.e}function Gt(a,e,t,n){n&Le&&We(a.v,e),n&Re?We(a.i,t):a.i=t}function lt(a,e,t,n,l,i,_,u,h){var b=Oe;try{var y=(h&Le)!==0,d=(h&_t)===0,x=y?d?mt(l):Ye(l):l,v=h&Re?Ye(_):_,c={i:v,v:x,k:i,a:null,e:null,prev:t,next:n};return Oe=c,c.e=tt(()=>u(a,x,v),fe),c.e.prev=t&&t.e,c.e.next=n&&n.e,t===null?e.first=c:(t.next=c,t.e.next=c.e),n!==null&&(n.prev=c,n.e.prev=c.e),c}finally{Oe=b}}function Xe(a,e,t){for(var n=a.next?a.next.e.nodes_start:t,l=e?e.e.nodes_start:t,i=a.e.nodes_start;i!==n;){var _=wt(i);l.before(i),i=_}}function ie(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function it(a,e,t){if(a.multiple)return Kt(a,e);for(var n of a.options){var l=xe(n);if(Ht(l,e)){n.selected=!0;return}}(!t||e!==void 0)&&(a.selectedIndex=-1)}function Wt(a,e){at(()=>{var t=new MutationObserver(()=>{var n=a.__value;it(a,n)});return t.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function Yt(a,e,t=e){var n=!0;At(a,"change",()=>{var l;if(a.multiple)l=[].map.call(a.querySelectorAll(":checked"),xe);else{var i=a.querySelector(":checked");l=i&&xe(i)}t(l)}),at(()=>{var l=e();if(it(a,l,n),n&&l===void 0){var i=a.querySelector(":checked");i!==null&&(l=xe(i),t(l))}a.__value=l,n=!1}),Wt(a)}function Kt(a,e){for(var t of a.options)t.selected=~e.indexOf(xe(t))}function xe(a){return"__value"in a?a.__value:a.value}function ke(a){return function(...e){var t=e[0];return t.preventDefault(),a==null?void 0:a.apply(this,e)}}function Qe(a,e){var i;var t=(i=a.$$events)==null?void 0:i[e.type],n=je(t)?t.slice():t==null?[]:[t];for(var l of n)l.call(this,e)}var Pt=N('<span class="material-icons">drag_indicator</span>'),Ut=N('<div class="flex flex-col w-full"><!> <div><div class="mr-sm"> </div> <div class="w-full flex flex-col"><!></div></div></div>'),Xt=N('<span class="material-icons">drag_indicator</span>'),Qt=N('<div class="material-icons flex md:px-sm items-center cursor-pointer">edit</div>'),Zt=N('<div class="material-icons flex md:px-sm items-center cursor-pointer">difference</div>'),jt=N('<div class="flex flex-col rounded-md space-y-md justify-center"><!> <!></div>'),$t=N('<div class="flex items-center text-gray-400 ml-md"> </div>'),er=N('<div class="flex flex-nowrap w-full"><!> <div class="flex flex-col flex-shrink w-full"><!></div> <!></div> <!>',1),tr=N("<section><!></section>");function rr(a,e){Ae(e,!1);const t=Je(),n=()=>j(o(),"$values",t),l=()=>j(g(),"$form",t),i=()=>j($,"$dirty",t),_=()=>j(w,"$errors",t);let u=s(e,"name",8),h=s(e,"mode",8,"write"),b=s(e,"containerClass",8,void 0),y=s(e,"hideBorders",8),d=s(e,"slimInputs",8),x=s(e,"index",8),v=s(e,"numbered",8),c=s(e,"editable",8,!1),p=s(e,"draggable",8,!1),T=s(e,"duplicatable",8,!1),B=s(e,"validate",8,!0);me("name",u());let g=s(e,"form",24,()=>Ce("form")),o=s(e,"values",24,()=>Ce("values")),f=s(e,"showAllInputs",8,!1),H=s(e,"disabled",8,!1);const D=nt();let w=Ce("errors"),$=Ce("dirty"),m=re(),G=re(),ae=re(),ue=re(!1),O=re(),de=re(),M=re(),R=re();Mt(()=>{K(ae,Nt(r(O))),K(ue,!0)});function ee(A){var I;(I=o())==null||I.update(k=>Ot(k,u(),A))}function se(A,I){var k;if(!_e[r(m).type])throw new Error(`Input type of ${(k=r(m))==null?void 0:k.type} is not found in the types map. Make sure you imported the type and the type property on your input is defined.`);return _e[r(m).type].isEqual?_e[r(m).type].isEqual(A,I,r(m)):Ft(A,I)}function ve(A){const I=we(A,u());se(I,r(O))||K(O,I)}X(()=>(r(m),l(),J(u()),J(h())),()=>{var A,I,k,C,E;K(m,l().inputs.find(W=>W.name===u())),K(G,((k=(I=(A=r(m))==null?void 0:A.layout)==null?void 0:I[h()])==null?void 0:k.containerClass)||((E=(C=r(m))==null?void 0:C.layout)==null?void 0:E.containerClass)||"")}),X(()=>(r(m),J(B()),n()),()=>{_e&&r(m)&&B()&&ve(n())}),X(()=>r(O),()=>{ee(r(O))}),X(()=>(J(f()),l(),r(m),n(),J(h())),()=>{K(de,f()||Bt(l().inputs,r(m),n(),h()))}),X(()=>(r(ue),i(),J(u()),J(B()),n(),r(ae)),()=>{if(r(ue)&&i()[u()]!==!0&&B()){const A=we(n(),u());se(r(ae),A)||Fe($,he(i)[u()]=!0,he(i))}}),X(()=>(n(),J(u()),i(),r(R),r(m)),()=>{var I,k;const A=we(n(),u());i()[u()]&&!se(r(R),A)&&((k=(I=r(m))==null?void 0:I.onChange)==null||k.call(I,r(R),A,r(m)),K(R,A))}),X(()=>(i(),J(u()),l(),_()),()=>{K(M,(i()[u()]||l().showAllErrors)&&_()[u()])}),Be(),Se();var U=Ze(),pe=Ie(U);z(pe,()=>r(de)&&r(m),A=>{var I=tr(),k=q(I);z(k,v,C=>{var E=Ut(),W=q(E);z(W,()=>p()&&!H(),L=>{var F=Pt();V(L,F)});var te=Z(W,2),Y=q(te),ne=q(Y);S(Y);var ce=Z(Y,2),Te=q(ce);Ke(Te,()=>we(_e,[r(m).type,h()]),(L,F)=>{F(L,{class:"ml-md",get input(){return r(m)},get error(){return _()[u()]},get isDirty(){return i()[u()]},get showError(){return r(M)},get value(){return r(O)},set value(le){K(O,le)},get disabled(){return H()},$$legacy:!0})}),S(ce),S(te),S(E),P(()=>{Q(te,`e-input-container e-input-type-${r(m).type??""} flex`),oe(ne,`${x()+1}.`)}),V(C,E)},C=>{var E=er(),W=Ie(E),te=q(W);z(te,()=>p()&&!H(),L=>{var F=Xt();V(L,F)});var Y=Z(te,2),ne=q(Y);Ke(ne,()=>_e[r(m).type][h()],(L,F)=>{F(L,{get hideBorders(){return y()},get slimInputs(){return d()},get input(){return r(m)},get error(){return _()[u()]},get isDirty(){return i()[u()]},get showError(){return r(M)},get value(){return r(O)},set value(le){K(O,le)},get disabled(){return H()},$$legacy:!0})}),S(Y);var ce=Z(Y,2);z(ce,()=>c()||T(),L=>{var F=jt(),le=q(F);z(le,c,Ve=>{var ye=Qt();ge("click",ye,ke(()=>D("edit"))),V(Ve,ye)});var ot=Z(le,2);z(ot,T,Ve=>{var ye=Zt();ge("click",ye,ke(()=>D("duplicate"))),V(Ve,ye)}),S(F),V(L,F)}),S(W);var Te=Z(W,2);z(Te,()=>{var L;return((L=r(m))==null?void 0:L.imported)&&(c()||T())},L=>{var F=$t(),le=q(F);S(F),P(()=>oe(le,`*Imported from: ${r(m).imported??""}`)),V(L,F)}),V(C,E)}),S(I),P(()=>Q(I,`e-input-container e-input-type-${r(m).type??""} ${(r(G)||b())??""}`)),V(A,I)}),V(a,U),De()}var ar=N("<form><!></form>");function nr(a,e){var B;Ae(e,!1);const t=Je(),n=()=>j(y(),"$errors",t),l=()=>j(u(),"$form",t),i=()=>j(b(),"$values",t),_=v(St,250);let u=s(e,"form",8);s(e,"forms",8),s(e,"currentFormIndex",8);let h=s(e,"validating",12);me("form",u());let b=s(e,"values",8);if(b()&&!((B=b())!=null&&B.update))throw"values needs to be a writable store";b()||console.warn("values needs to be a writable store"),me("values",b());let y=s(e,"errors",24,()=>Pe({}));me("errors",y());let d=s(e,"dirty",24,()=>Pe({}));me("dirty",d());let x=re();function v(g,o){const f=Lt((H,D,w)=>{g(...w).then(H).catch(D)},o);return(...H)=>new Promise((D,w)=>{f(D,w,H)})}async function c(g,o){if(g&&o){h(!0);try{qt(y(),await _(g,o)),K(x,Tt(n())>0)}catch(f){console.error(f)}h(!1)}}X(()=>(l(),i()),()=>{c(l(),i())}),X(()=>J(u()),()=>{me("form",u())}),Be(),Se();var p=ar(),T=q(p);Dt(T,e,"default",{get values(){return b()},get errors(){return y()},get dirty(){return d()},get hasErrors(){return r(x)},get validating(){return h()}}),S(p),V(a,p),De()}var sr=N("<h1> </h1>"),lr=N("<p> </p>"),ir=N("<button> </button>"),or=N('<div><button type="submit"> </button> <!></div>'),ur=N("<!> <!> <div></div> <!>",1),dr=N("<section><!></section>");function wr(a,e){Ae(e,!1);const t=Je(),n=()=>j(h(),"$form",t),l=()=>j(b(),"$values",t),i=()=>j(y(),"$errors",t),_=()=>j(d(),"$dirty",t),u=nt();let h=s(e,"form",8),b=s(e,"values",12),y=s(e,"errors",12,void 0),d=s(e,"dirty",12,void 0),x=s(e,"containerClass",8,""),v=s(e,"headerClass",8,""),c=s(e,"listClass",8,""),p=s(e,"inputContainerClass",8,void 0),T=s(e,"descriptionClass",8,""),B=s(e,"numbered",8,!1),g=s(e,"disabled",8,!1),o=s(e,"showButtons",8,!0),f=s(e,"buttonsContainerClass",8,"");s(e,"showPrimaryButton",8,!0);let H=s(e,"primaryButtonText",8,"Submit"),D=s(e,"primaryButtonClass",8,""),w=s(e,"showSecondaryButton",8,!0),$=s(e,"secondaryButtonText",8,"Cancel"),m=s(e,"secondaryButtonClass",8,""),G=re([]);function ae(M){if(M)return Fe(h(),he(n).showAllErrors=!0,he(n));u("submit",{values:l(),errors:i(),dirty:_(),form:n()})}function ue(){u("cancel",{values:l(),errors:i(),dirty:_(),form:n()})}X(()=>(n(),J(g())),()=>{var M,R,ee,se;if((R=(M=n())==null?void 0:M.inputs)!=null&&R.length){let ve=0;K(G,(se=(ee=n())==null?void 0:ee.inputs)==null?void 0:se.map(U=>((U==null?void 0:U.type)==="html"&&(ve+=1),ve))),g()&&Fe(h(),he(n).inputs=n().inputs.map(U=>({...U,disabled:!0})),he(n))}}),Be(),Se();var O=dr(),de=q(O);nr(de,{get form(){return h()},get values(){return b()},set values(M){b(M)},get errors(){return y()},set errors(M){y(M)},get dirty(){return d()},set dirty(M){d(M)},children:It,$$slots:{default:(M,R)=>{const ee=Ee(()=>R.hasErrors),se=Ee(()=>R.validating);var ve=ur(),U=Ie(ve);z(U,()=>n().header,k=>{var C=sr(),E=q(C);S(C),P(()=>{Q(C,v()),oe(E,n().header)}),V(k,C)});var pe=Z(U,2);z(pe,()=>n().description,k=>{var C=lr(),E=q(C);S(C),P(()=>{Q(C,T()),oe(E,n().description)}),V(k,C)});var A=Z(pe,2);st(A,7,()=>n().inputs,k=>`${k.name}_${JSON.stringify(k.displayCondition)||""}`,(k,C,E)=>{var W=Ee(()=>r(E)-r(G)[r(E)]<0?0:r(E)-r(G)[r(E)]),te=Ee(()=>{var Y;return B()&&((Y=r(C))==null?void 0:Y.type)!=="html"});rr(k,{get form(){return h()},get disabled(){return r(C).disabled},get name(){return r(C).name},get containerClass(){return p()},get index(){return r(W)},get numbered(){return r(te)}})}),S(A);var I=Z(A,2);z(I,o,k=>{var C=or(),E=q(C),W=q(E);S(E);var te=Z(E,2);z(te,w,Y=>{var ne=ir(),ce=q(ne);S(ne),P(()=>{Q(ne,m()),oe(ce,$())}),ge("click",ne,ke(ue)),V(Y,ne)}),S(C),P(()=>{Q(C,f()),E.disabled=r(ee)||g()||r(se),Q(E,D()),oe(W,H())}),ge("click",E,ke(()=>ae(r(ee)||g()))),V(k,C)}),P(()=>Q(A,c())),V(M,ve)}},$$legacy:!0}),S(O),P(()=>Q(O,x())),V(a,O),De()}var vr=N("<option> </option>"),fr=N("<div><select><option> </option><!></select></div>");function Ir(a,e){Ae(e,!1);let t=s(e,"value",12,void 0),n=s(e,"disabled",8,void 0),l=s(e,"placeholder",8,void 0),i=s(e,"options",8),_=s(e,"showError",8),u=s(e,"required",8,void 0),h=s(e,"autocomplete",8,"off"),b=s(e,"componentClass",8),y=s(e,"selectClass",8,""),d=s(e,"unselectedValue",8);X(()=>(J(t()),J(i()),Ne),()=>{var g,o;t(((o=(g=i())==null?void 0:g.find(f=>{const H=Ne(f.value),D=Ne(t());return H===D}))==null?void 0:o.value)||t())}),Be(),Se();var x=fr(),v=q(x);P(()=>{t(),kt(()=>{y(),u(),n(),_(),l(),h(),d(),i()})});var c=q(v),p={},T=q(c);S(c);var B=Z(c);z(B,i,g=>{var o=Ze(),f=Ie(o);st(f,1,i,Rt,(H,D)=>{var w=vr(),$={},m=q(w);S(w),P(()=>{$!==($=r(D).value)&&(w.value=(w.__value=r(D).value)==null?"":r(D).value),w.disabled=r(D).disabled,oe(m,r(D).label)}),V(H,w)}),V(g,o)}),S(v),S(x),P(()=>{Q(x,b()||"flex w-full items-stretch"),Q(v,`base-input pr-lg ${y()??""}`),v.required=u(),v.disabled=n(),Ue(v,"placeholder",l()),Ue(v,"autocomplete",h()),Vt(v,"base-input-error",_()),p!==(p=d())&&(c.value=(c.__value=d())==null?"":d()),oe(T,l()||"")}),ge("click",v,function(g){Qe.call(this,e,g)}),ge("change",v,function(g){Qe.call(this,e,g)}),Yt(v,t),V(a,x),De()}export{Ir as H,wr as W,Qe as b};
